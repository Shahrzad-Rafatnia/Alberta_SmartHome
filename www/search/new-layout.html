<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
  <title>Search - SmartHome</title>
  <link rel="stylesheet" type="text/css" href="/css/common.css">
  <link rel="stylesheet" type="text/css" href="/css/mangineer.css">
    <script data-main="/js/main" src="/js/vendor/require-jquery.js">
    <script>
    // Require config!
    require.config({
        shim: {
            underscore: {
                exports: '_'
            }
        },
        paths: {
            underscore: 'vendor/underscore'
       }
    });
  </script>

  <script src="/js/jsearch.js"></script>

<script id="_t-sensor-category" type="text/html">
<fieldset class="sensor-group">
  <legend><%- majesticTitle %></legend>
</fieldset>
</script>

<script id="_t-sensor-checkbox" type="text/html">
<label>
  <input type="checkbox" name="sensors[]" value="<%= id %>">
  <%- name %>
</label>
</script>

<script id="_t-apt-checkbox" type="text/html">
<label>
  <input type="checkbox name="apartments[]" value="apt<%= num %>">
  Unit <%= num %>
</label>
</script>

<script id="_t-checkbox-category" type="text/html">
<fieldset class="checkbox-group">
  <legend><%= majesticTitle %></legend>
  <ul>
  <% _.each(data, function (val, text) { %>
  <li><label>
    <input type="checkbox" name="<%- paramName %>[]" value="<%- val %>">
    <%= text %>
  </label></li>
  <% }); %>
  </ul>
  <% if (checkAll !== undefined && checkAll === true) { %>
    <input class="js-check-all" type="button" value="Check all">
  <% } %>
</fieldset>
</script>

<script id="_t-display-text" type="text/html">
<h2>Apartment <%= aptNumber %></h2>
<% $.each(dates, function(date, sensor) { %>
<h4><%= date %></h4>
<%  $.each(sensors, function(sensor, sensorData) { %>
<%      if (_.isArray(val)) { %>
<h5><%= sensor %></h5>
<%          $.each(sensorData, function(hour, val) { %>
<p>Hour <%= hour %></p>
<%          }); %>
<%      } else { %>
<p><%= sensor %>: <%= sensorData %></p>
<%      }
    });
}); %>
</script>

</head>
<body>
  <div id="wrapper">

    <header class="page-header">
      <div class="masthead">
        <h1 class="logo"> <a href="/">SmartHome</a> </h1>

        <nav class="primary-nav"> <ul class="inline-nav">
                  <li><a href="/manager/home.php"> Overview </a></li>
            <li><a href=""> Graphs </a></li>
            <li><a href=""> Reports </a></li>
            <li><a href="/manager/viewresidents.php"> Residents </a></li>
            <li><a href="/manager/utilitycontracts.php"> Utility Contracts </a></li>
            <li><a href="/auth/register.php"> Register New User</a>
              </ul> </nav>

        <nav class="secondary-nav"> <ul class="inline-nav">
            <li><a href="/auth/logout.php">Logout</a></li>
        </ul> </nav>
      </div>
    </header>

    <div class="content-wrapper">
      <ul id="graphs">
        <!-- We need JS that generates the following thing: -->
        <!-- The id is autogenerated. -->
        <li class="graph-group" id="graph1"->

          <ul class="graph-controls">

            <!--

              data-gc means "Graph Control". We can basically do this

              $('[data-gc]').val()

              And

              $('[data-gc]').attr('name') to get all the information we 
              really want.


            -->

            <li>
              <h3>Axes</h3>

              <div class="graph-control-axes">
                <label><span class="the-actual-gorram-label">X Axis</span>
                  <select data-gc name="xaxis">
                    <optgroup label="Sensors">
                      <option value="CO2">Carbon Dioxide (PPM)</option>
                    </optgroup>
                  </select>
                </label>

                <label><span class="the-actual-gorram-label">Y Axis</span>
                  <select data-gc name="yaxis">
                    <optgroup label="Time">
                      <option value="time">Time</option>
                    </optgroup>
                  </select>
                </label>

              </div>
            </li>


            <li>
              <h3>Date/Time</h3>

              <div class="graph-controller-datetime">

                <!-- There'll be different inputs for different displays. -->
                <div style="display: none;" class="graph-controller-hourly">
                  <label><span class="the-actual-gorram-label"> Day </span>
                    <!-- All inputs that should not be enabled at once! -->
                    <input data-gc data-input-disabled type="date" />
                  </label>
                </div>

                <div class="graph-controller-daily">
                  <p class="informative"> Ranges are inclusive. </p>

                  <label><span class="the-actual-gorram-daily"> Start Day </span>
                    <input data-gc type="date" />
                  </label>

                  <label><span class="the-actual-gorram-daily"> End Day </span>
                    <input data-gc name="herp" data-input-disabled type="date" />
                  </label>
                </div>

              </div>
            </li>
      
            <li>
              <h3>Apartments</h3>

              <!-- How are we going to display this? -->
              <ul data-gcl data-name="apts">
                <li><label><input name="apts[]" type="checkbox" value="1" />
                    <span class="the-actual-gorram-label">
                      Apartment 1
                    </span>
                  </li>
              </ul>
            </li>

            <li>
              <h3> Graph Type </h3>

              <ul data-graph data-name="graph-type">
                <li><label><input checked type="radio" name="graph-type" value="bar" />
                    <span class="graph-preview"> Bar graph</span>
                  </label></li>
                <li><label><input type="radio" name="graph-type" value="line" />
                    <span class="graph-preview"> Line graph</span>
                  </label></li>
              </ul>
            </li>

          </ul>

          <div class="graph-container">
            <!-- the graph goes here, yo! -->
          </div>

        </li>

      </ul>

    </div>
</div>
</body>
</html>
